<!DOCTYPE html>
<html lang="en-US"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Throwing Eggs from a Building · Jun Tian</title><meta name="title" content="Throwing Eggs from a Building · Jun Tian"/><meta property="og:title" content="Throwing Eggs from a Building · Jun Tian"/><meta property="twitter:title" content="Throwing Eggs from a Building · Jun Tian"/><meta name="description" content="Documentation for Jun Tian."/><meta property="og:description" content="Documentation for Jun Tian."/><meta property="twitter:description" content="Documentation for Jun Tian."/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-132847825-3"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-132847825-3', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.jpg" alt="Jun Tian logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Jun Tian</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">👋 About</a></li><li><span class="tocitem">💻 Programming</span><ul><li><a class="tocitem" href="../../programming/A_Deep_Dive_into_Distributed.jl/">A Deep Dive into Distributed.jl</a></li></ul></li><li><span class="tocitem">📖 Reading</span><ul><li><a class="tocitem" href="../../reading/Notes_on_Distributional_Reinforcement_Learning/">Notes on Distributional Reinforcement Learning</a></li></ul></li><li><a class="tocitem" href="../../AMA/">🙋 Ask Me Anything</a></li><li><a class="tocitem" href="../../blogroll/">🔗 Blogroll</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Throwing Eggs from a Building</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Throwing Eggs from a Building</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/findmyway/TianJun.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/findmyway/TianJun.jl/blob/master/docs/src/essays/Throwing_Eggs_from_a_Building/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><hr/><p>keywords: Algorithm CJKmainfont: KaiTi –-</p><h1 id="Throwing-Eggs-from-a-Building"><a class="docs-heading-anchor" href="#Throwing-Eggs-from-a-Building">Throwing Eggs from a Building</a><a id="Throwing-Eggs-from-a-Building-1"></a><a class="docs-heading-anchor-permalink" href="#Throwing-Eggs-from-a-Building" title="Permalink"></a></h1><p>下午做练习题时碰到的问题，<em>Algorithms, 4th</em>中的<strong>1.4.24</strong>和<strong>1.4.25</strong>。思考了之后发现是个挺有意思的问题。下面结合题目和网上的一些资料做个简单的分析。</p><h2 id="1.-问题描述"><a class="docs-heading-anchor" href="#1.-问题描述">1. 问题描述</a><a id="1.-问题描述-1"></a><a class="docs-heading-anchor-permalink" href="#1.-问题描述" title="Permalink"></a></h2><p>原文的问题是这样的：</p><blockquote><p>1.4.24 <em>Throwing eggs from a building.</em> Suppose that you have an N-story building and plenty of eggs. Suppose also that an egg is broken if it is thrown off floor F or higher, and intact otherwise. First, devise a strategy to determine the value of F such that the number of broken eggs is <span>$\sim lg N$</span> when using <span>$\sim lg N$</span> throws, then find a way to reduce the cost to <span>$\sim 2lg F$</span>.</p></blockquote><p>简单来说就是这么个意思：</p><blockquote><p>在一座N层楼房上往下扔<strong>假鸡蛋</strong>，这些<strong>假鸡蛋</strong>只有在第F层楼及以上才会被摔破（没有摔破的鸡蛋可以接着用）。为了找到这个F，设计一个思路使得尝试的次数接近<span>$\sim lg N$</span>并且最后摔破的鸡蛋个数接近<span>$\sim lg N$</span>，然后想办法降低到<span>$\sim 2lg F$</span>。</p></blockquote><h3 id="1.1-二分法"><a class="docs-heading-anchor" href="#1.1-二分法">1.1 二分法</a><a id="1.1-二分法-1"></a><a class="docs-heading-anchor-permalink" href="#1.1-二分法" title="Permalink"></a></h3><p>首先想到的应该是用二分法来解决这个问题。从中间数（N/2)开始，如果鸡蛋摔破了，就继续往下找。显然，如果鸡蛋在1楼才摔破的话，摔破的鸡蛋个数和尝试的次数都接近<span>$\sim lg N$</span>。问题在于，如何降低到<span>$\sim 2lg F$</span>？</p><h3 id="1.2-减少摔碎的鸡蛋个数"><a class="docs-heading-anchor" href="#1.2-减少摔碎的鸡蛋个数">1.2 减少摔碎的鸡蛋个数</a><a id="1.2-减少摔碎的鸡蛋个数-1"></a><a class="docs-heading-anchor-permalink" href="#1.2-减少摔碎的鸡蛋个数" title="Permalink"></a></h3><p>试着思考下这个问题的特殊之处，<strong>如果某一次尝试的过程中鸡蛋没有摔破，那么可以接着用</strong>！回顾前面的二分法中的极端情况，每次尝试都摔碎了个蛋，太浪费了。也就是说，如果换成从下往上搜索而不是从中间开始搜索，那么最初的几次尝试很大可能不会摔碎蛋的。于是，最简单的应该就是拿着鸡蛋从1楼开始往上一层一层试，直到鸡蛋摔碎。不过这样虽然摔碎的鸡蛋的个数降到了<strong>1个</strong>，但是测试的次数却上升到了<strong>F个</strong>。</p><h3 id="1.3-平衡摔碎的鸡蛋数和尝试的次数"><a class="docs-heading-anchor" href="#1.3-平衡摔碎的鸡蛋数和尝试的次数">1.3 平衡摔碎的鸡蛋数和尝试的次数</a><a id="1.3-平衡摔碎的鸡蛋数和尝试的次数-1"></a><a class="docs-heading-anchor-permalink" href="#1.3-平衡摔碎的鸡蛋数和尝试的次数" title="Permalink"></a></h3><p>从前面的分析可以感受到，如果降低摔碎的鸡蛋个数，测试的次数就上去了，反之亦然。那么如何平衡呢？前面是拿着鸡蛋一层一层往上测试，这样子太慢了！不妨每隔两层（三层，五层？）测试一次，摔碎了的话再退回来。这样测试的次数将低了一些，但是仍然是线性的。还是太慢了！干脆换成指数增长。假设第k次摔碎了，然后再倒回来采用二分查找。这样摔碎的鸡蛋个数是<span>$\sim lg(F/2)$</span>（前面在第<span>$1,2,4,...,2^k-1$</span>层测试的时候没摔碎，只有后面<span>$2^k-1到 2^k$</span>之间 二分查找时候才有可能摔碎），而尝试的次数  为<span>$\sim 2lg F$</span>。</p><h3 id="1.4-疑惑"><a class="docs-heading-anchor" href="#1.4-疑惑">1.4 疑惑</a><a id="1.4-疑惑-1"></a><a class="docs-heading-anchor-permalink" href="#1.4-疑惑" title="Permalink"></a></h3><p>疑惑的是，这样子虽然肯定可以降低摔碎鸡蛋的个数，但并不一定能降低尝试的次数啊</p><h2 id="2-问题扩展"><a class="docs-heading-anchor" href="#2-问题扩展">2 问题扩展</a><a id="2-问题扩展-1"></a><a class="docs-heading-anchor-permalink" href="#2-问题扩展" title="Permalink"></a></h2><blockquote><p>1.4.25 <em>Throwing two eggs from a building.</em> Consider the previous question, but now suppose you only have two eggs, and your cost model is the number of throws. Devise a strategy to determine F such that the number of throws is at most <span>$2\sqrt{N}$</span>, then find a way to reduce the cost to <span>$\sim c\sqrt{F}$</span>. This is analogous to a situation where search hits (egg intact) are much cheaper than misses(egg broken).</p></blockquote><h3 id="2.1-简单的尝试"><a class="docs-heading-anchor" href="#2.1-简单的尝试">2.1 简单的尝试</a><a id="2.1-简单的尝试-1"></a><a class="docs-heading-anchor-permalink" href="#2.1-简单的尝试" title="Permalink"></a></h3><p>现在的问题变成了，如果只有两个鸡蛋，怎样才能降低查找次数？</p><p>不考虑其他的，假设楼房有100层，现在手上有两个蛋，先跑到50楼扔一个了再说，人品不好，蛋碎了，那么接下来该怎么办？老老实实拿着剩下的那个从一楼开始尝试吧，最多试50次。直觉告诉我们，一开始就选太大了反而得不偿失。事实上，借用前一个问题的分析思路，可以尝试用线性增长的方式来解决这个问题(显然这次不能用指数增长了，还得check最后一个区间的……)。假如每次往上提升采用一个<strong>定步长</strong>，其实可以算出最优解。设步长为x，那么最大的查找次数为<span>$x + \frac{100}{x}$</span>，其最优解近似于<span>$2\sqrt{N}$</span></p><h3 id="2.2-变步长"><a class="docs-heading-anchor" href="#2.2-变步长">2.2 变步长</a><a id="2.2-变步长-1"></a><a class="docs-heading-anchor-permalink" href="#2.2-变步长" title="Permalink"></a></h3><p>前面这种解法的瓶颈点在哪呢？最后一步！</p><p>假设鸡蛋在最后一步那地方碎了，此时已经走了<span>$\frac{100}{x}$</span>步，然后还需要再尝试10次（从90到100层之间，也就是步长的长度）。</p><p>通过采用<strong>变步长</strong>的思想，前面这个解决方案还可以稍微改进一些。我们知道，二分法求解问题的核心思想是<strong>最大化信息熵</strong>，通俗点说，就是每check一次之后，不管目标值在check点的左边还是右边，对我来说需要check的次数是相同的。对应到这个问题上，设第一步的步长为<span>$x_1$</span>，不管蛋碎了没有，我希望接下来check的次数都是相同的。显然，如果蛋碎了，我就只剩一个蛋了，还需要从下往上check<span>$x_1-1$</span>次，如果蛋没碎，此时只要<span>$x_1$</span>选取的合理，满足前面最大熵要求，我仍然只需要<span>$x_1 - 1$</span>次就能找到F。如此迭代下去便不难发现，最后可以得到公式<span>$x_1 + (x_1-1) + (x_1 - 1 - 1) + ... + 1 = N$</span>，从而可以求解出初始步长。</p><h2 id="3-更多的鸡蛋"><a class="docs-heading-anchor" href="#3-更多的鸡蛋">3 更多的鸡蛋～</a><a id="3-更多的鸡蛋-1"></a><a class="docs-heading-anchor-permalink" href="#3-更多的鸡蛋" title="Permalink"></a></h2><p>如果鸡蛋的个数变成3个，4个，5个......</p><p>采用<strong>减而治之</strong>的思想，可以很好去解决这个问题。以3个鸡蛋为例子：</p><blockquote><ol><li>首先，得确定第一个步长<span>$x_1$</span>，</li><li>如果碎了，则问题转换成了2个鸡蛋<span>$x_1-1$</span>层楼的问题，（根据前面的方法假设该问题的最优解为<span>$x_c$</span>)；</li><li>如果没碎，则转换成3个鸡蛋<span>$N-x_1$</span>层楼的问题</li></ol></blockquote><p>通过迭代的方法比较容易求解该类问题。</p><p>更多有意思的分析可以看看<a href="http://datagenetics.com/blog/july22012/index.html">这里</a>。 下图是从上文中摘出的一幅图，用来说明不同情况下需要的蛋的个数。</p><p><img src="pic.png" alt/></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>. All contents published at this site follows <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a> by default. For the Chinese version, please visit <a href="https://tianjun.me">tianjun.me</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Saturday 23 December 2023 15:51">Saturday 23 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
