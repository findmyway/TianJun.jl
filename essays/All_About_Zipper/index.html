<!DOCTYPE html>
<html lang="en-US"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>1. ä»€ä¹ˆæ˜¯Zipper Â· Jun Tian</title><meta name="title" content="1. ä»€ä¹ˆæ˜¯Zipper Â· Jun Tian"/><meta property="og:title" content="1. ä»€ä¹ˆæ˜¯Zipper Â· Jun Tian"/><meta property="twitter:title" content="1. ä»€ä¹ˆæ˜¯Zipper Â· Jun Tian"/><meta name="description" content="Documentation for Jun Tian."/><meta property="og:description" content="Documentation for Jun Tian."/><meta property="twitter:description" content="Documentation for Jun Tian."/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-132847825-3"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-132847825-3', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.jpg" alt="Jun Tian logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Jun Tian</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">ğŸ‘‹ About</a></li><li><span class="tocitem">ğŸ’» Programming</span><ul><li><a class="tocitem" href="../../programming/A_Deep_Dive_into_Distributed.jl/">A Deep Dive into Distributed.jl</a></li></ul></li><li><span class="tocitem">ğŸ“– Reading</span><ul><li><a class="tocitem" href="../../reading/Notes_on_Distributional_Reinforcement_Learning/">Notes on Distributional Reinforcement Learning</a></li></ul></li><li><a class="tocitem" href="../../AMA/">ğŸ™‹ Ask Me Anything</a></li><li><a class="tocitem" href="../../blogroll/">ğŸ”— Blogroll</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>1. ä»€ä¹ˆæ˜¯Zipper</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>1. ä»€ä¹ˆæ˜¯Zipper</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/findmyway/TianJun.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ï‚›</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/findmyway/TianJun.jl/blob/master/docs/src/essays/All_About_Zipper/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ï„</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><hr/><p>keywords: DataStructure,OCaml,Clojure CJKmainfont: KaiTi â€“-</p><h1 id="1.-ä»€ä¹ˆæ˜¯Zipper"><a class="docs-heading-anchor" href="#1.-ä»€ä¹ˆæ˜¯Zipper">1. ä»€ä¹ˆæ˜¯Zipper</a><a id="1.-ä»€ä¹ˆæ˜¯Zipper-1"></a><a class="docs-heading-anchor-permalink" href="#1.-ä»€ä¹ˆæ˜¯Zipper" title="Permalink"></a></h1><p>æ ¹æ®Wikipediaä¸Šçš„<a href="https://en.wikipedia.org/wiki/Zipper_(data_structure)">è§£é‡Š</a>ï¼Œzipperå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œèƒ½å¤Ÿå¾ˆæ–¹ä¾¿åœ°éå†å’Œæ›´æ–°list, treeä»¥åŠä¸€äº›æŠ½è±¡çš„å¾ªç¯å®šä¹‰çš„ç»“æ„ã€‚è¿™ä¸ªæ¦‚å¿µçš„ç‰¹æ®Šä¹‹å¤„åœ¨äºï¼Œå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­å¯¹æ•°æ®ç»“æ„ä¸­æŸä¸ªå…ƒç´ çš„æ”¹å˜ä¸ä¼šå½±å“å·²æœ‰çš„å˜é‡ï¼Œzipperè¦è§£å†³çš„å°±æ˜¯åœ¨æ­¤æ¡ä»¶ä¸‹å¦‚ä½•é«˜æ•ˆåœ°æŸ¥æ‰¾å’Œæ›´æ–°ã€‚</p><h1 id="2.-å¦‚ä½•ç†è§£Zipper"><a class="docs-heading-anchor" href="#2.-å¦‚ä½•ç†è§£Zipper">2. å¦‚ä½•ç†è§£Zipper</a><a id="2.-å¦‚ä½•ç†è§£Zipper-1"></a><a class="docs-heading-anchor-permalink" href="#2.-å¦‚ä½•ç†è§£Zipper" title="Permalink"></a></h1><p>æœ€æ—©å…³äºzipperçš„ä»‹ç»å°±æ˜¯[FUNCTIONAL PEARL The Zipper][]è¿™ç¯‡paperã€‚æ–‡ç« é‡Œç”¨OCamlè¯­è¨€è¯¦ç»†æè¿°äº†ä¸¤ç§æ•°æ®ç»“æ„ï¼Œä¸€ç§æ˜¯list zipperï¼Œå¦ä¸€ç§æ˜¯binary tree zipperï¼ˆè‡ªå·±ç¬¬ä¸€éè¯»è¿™ç¯‡paperçš„æ—¶å€™ï¼Œå¯¹ç¬¬ä¸€ä¸ªä¾‹å­æƒ³äº†å¾ˆä¹…ä¹Ÿæ²¡ç†è§£æ¸…æ¥šï¼Œåæ¥å¿½ç„¶å‘ç°å…¶å®å°±æ˜¯list zipperçš„å®ç°ï¼‰ã€‚</p><p>ä¸ªäººæ„Ÿè§‰ä¸€å¼€å§‹ç›´æ¥å»ç†è§£zipperçš„æ¦‚å¿µå¹¶ä¸å¤ªå®¹æ˜“ï¼Œå…ˆç”¨Church numberè¿™ä¸ªç®€å•çš„ä¾‹å­æ¥åŠ æ·±ä¸‹å¯¹<span>$\lambda$</span>æ¼”ç®—çš„è®¤è¯†ã€‚</p><p>æ ¹æ®Wikipediaä¸Šçš„<a href="https://en.wikipedia.org/wiki/Lambda_calculus">è§£é‡Š</a>ï¼Œä¸€ä¸ªæœ‰æ•ˆçš„<span>$\lambda$</span>ç®—å­åŒ…å«ä»¥ä¸‹3æ¡è§„åˆ™ï¼š</p><ol><li>å˜é‡<span>$x$</span>,å°±æ˜¯æœ€åŸºç¡€çš„ä¸€ä¸ª<span>$\lambda$</span>ç®—å­</li><li><p class="math-container">\[(\lambda x.t)\]</p>,ï¼ˆå³è¾“å…¥ä¸ºxï¼Œè¾“å‡ºä¸ºtçš„åŒ¿åå‡½æ•°ï¼‰</li><li><p class="math-container">\[(ts)\]</p>,å…¶ä¸­tå’Œséƒ½æ˜¯<span>$\lambda$</span>ç®—å­ï¼Œå°†tåº”ç”¨äºsï¼Œå¾—åˆ°çš„ä»ç„¶æ˜¯<span>$\lambda$</span>ç®—å­</li></ol><pre><code class="nohighlight hljs">0 =&gt; Î»f.Î»x.x  
1 =&gt; Î»f.Î»x.f x
2 =&gt; Î»f.Î»x.f (f x)
...</code></pre><p>ä¸Šé¢å‡ è¡Œæ˜¯wikié‡Œå¸¸è§çš„è¡¨ç¤ºChurch numberçš„ä¸€ç§æ–¹å¼ã€‚çœ‹ç€æœ‰ç‚¹æ™•ï¼Ÿæ ¹æ®å‰é¢çš„å®šä¹‰ï¼Œæˆ‘ä»¬æŠŠä¸Šé¢çš„è¡¨è¾¾å¼åŠ ç‚¹æ‹¬å·,ç„¶åå˜æ¢ä¸‹ç¬¦å·å°±å¥½ç†è§£äº†ï¼š</p><pre><code class="nohighlight hljs">0 =&gt; (Î»t.(Î»x.x))        ;; è®°ä½œ C0
1 =&gt; (Î»t.(Î»x.(tx)))     ;; è®°ä½œ C1
2 =&gt; (Î»t.(Î»x.(t(tx))))  ;; è®°ä½œ C2</code></pre><p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªä¸¤å±‚çš„åŒ¿åå‡½æ•°ï¼Œä¸Šé¢çš„Church numberå¯ä»¥çœ‹åšæ˜¯<span>$Ck t x$</span>ç»è¿‡Curryingä¹‹åçš„è¡¨ç¤ºï¼Œå…¶ä¸­Ckè¡¨ç¤ºå¯¹åº”æ•´æ•°kçš„Churchæ•°ï¼Œ tè¡¨ç¤ºæŸç§transformï¼ˆå¯ä»¥ç†è§£ä¸ºæŸç§å‡½æ•°å˜æ¢ï¼‰ï¼Œxè¡¨ç¤ºå˜é‡ã€‚å‡è®¾tä¸º<span>$lambda x: x + 1$</span>ï¼Œxä¸º0ï¼Œé‚£ä¹ˆChurch numberå°±ä¸æ•´æ•°ä¸€ä¸€å¯¹åº”äº†ã€‚</p><p>æœ¬æ–‡å¹¶ä¸æ‰“ç®—å¯¹<span>$\lambda$</span>æ¼”ç®—è¿›è¡Œæ·±å…¥æ¢è®¨ï¼Œåœ¨è¿™é‡Œå¼•å…¥Church numberçš„æ¦‚å¿µæ˜¯ä¸ºäº†è¯´æ˜ï¼Œåœ¨å‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µä¸­å³ä½¿æ˜¯æ•´æ•°nè¿™æ ·çš„åŸºç¡€æ•°æ®ç±»å‹ä¹Ÿæ˜¯é€šè¿‡é€’å½’æ¥è¡¨ç¤ºçš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€’å½’çš„è¿‡ç¨‹æ˜¯æœ‰ä¸€ä¸ªèµ·ç‚¹çš„ï¼Œå¯¹äºChurch numberçš„ä¾‹å­èµ·ç‚¹å°±æ˜¯C0ï¼Œå¦‚æœæƒ³è¦å¾—åˆ°Ckï¼Œåˆ™éœ€è¦é€’å½’è°ƒç”¨kæ¬¡è¿ç®—å¾—åˆ°ã€‚</p><h1 id="3.-List-Zipper"><a class="docs-heading-anchor" href="#3.-List-Zipper">3. List Zipper</a><a id="3.-List-Zipper-1"></a><a class="docs-heading-anchor-permalink" href="#3.-List-Zipper" title="Permalink"></a></h1><p>[FUNCTIONAL PEARL The Zipper][]ä¸­çš„ç¬¬ä¸€ä¸ªä¾‹å­å¦‚ä¸‹ï¼š</p><pre><code class="language-ocaml hljs">type tree = Item of item | Section of tree list;;
type path = Top | Node of tree list * path * tree list;;</code></pre><p>ç†è§£å‰é¢çš„Church numberä¹‹åï¼Œå†åŠ ä¸Šä¸€ç‚¹ç‚¹OCamlè¯­æ³•ï¼Œå°±å¾ˆå¥½ç†è§£ä¸Šé¢è¿™ä¸¤è¡Œä»£ç ï¼Œç¬¬ä¸€è¡Œé¦–å…ˆé€’å½’å®šä¹‰äº†ä¸€ä¸ªtreeç±»å‹ï¼Œå…¶ä¸­<span>$Item$</span>æ˜¯é€’å½’å®šä¹‰çš„èµ·ç‚¹ï¼Œå‡è®¾<span>$item$</span>çš„ç±»å‹æ˜¯intï¼Œä¸‹é¢å‡ ä¸ªä¾‹å­éƒ½æ˜¯treeçš„ä¸€äº›å®ä¾‹ï¼š</p><pre><code class="language-ocaml hljs">let t0 = Item (0)             (* æœ€åŸºæœ¬çš„ä¸€ä¸ªitem *)
let t1 = []                   (* ç©ºçš„tree *)
let t2 = Section [Item(1);Item(2);Item(3);Item(4)]  
(* ä¸€ä¸ªSection, å…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªItem *)

let t3 = Section [
	Section [Item(1);
		Section [Item(1)]];
	Section [Item(2);Item(2)];
	Section [Item(3);Item(3)]]
(* ä¸€ä¸ªSectionä¸­åŒ…å«äº†3ä¸ªSectionï¼Œæ¯ä¸ªSectionéƒ½æ˜¯å¯ä»¥åµŒå¥—çš„ *)</code></pre><p>ç¬¬äºŒè¡Œä»£ç ä¸­çš„<span>$path$</span>ç±»å‹å°±æ˜¯ä¸€ä¸ªtuppleï¼ŒåŒ…å«3ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä»¥treeä¸ºå…ƒç´ çš„åˆ—è¡¨ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯é€’å½’çš„pathï¼ˆèµ·ç‚¹æ˜¯Topï¼‰,ç¬¬ä¸‰ä¸ªå…ƒç´ ä»ç„¶æ˜¯ä»¥treeä¸ºå…ƒç´ çš„åˆ—è¡¨ã€‚ä¸‹é¢ä»ç„¶ç»™å‡ºå‡ ä¸ªå®ä¾‹ï¼š</p><pre><code class="language-ocaml hljs">let p0 = Node([], Top, [])    (* æœ€åŸºç¡€çš„ä¸€ä¸ªpathï¼Œå·¦è¾¹å’Œå³è¾¹çš„å…ƒç´ éƒ½æ˜¯ç©ºåˆ—è¡¨ï¼Œä¸­é—´æ˜¯èµ·ç‚¹å…ƒç´ Top *)
let p1 = Node (t0, p0, t0)     
let p2 = Node (t1, p1, t2)</code></pre><p>æœ‰äº†<span>$tree$</span>å’Œ<span>$path$</span>ä¸¤ä¸ªç±»å‹ä¹‹åï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªlist zipperçš„ç±»å‹äº†ï¼š</p><pre><code class="language-ocaml hljs">type location = Loc of tree * path</code></pre><p>è¿™é‡Œlocationæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º2çš„tuppleï¼ŒåŒ…å«<span>$tree$</span>å’Œ<span>$path$</span>ã€‚ä¸€ä¸ªlocationæœ¬è´¨æ˜¯å¾ˆè‡ªç”±çš„ï¼Œå…¶ä¸­çš„<span>$tree$</span>å’Œ<span>$path$</span>éƒ½å¯ä»¥æ˜¯ä»»æ„å®ç°ï¼Œé€šè¿‡å¯¹äºŒè€…åšä¸€äº›é™åˆ¶ï¼Œå³å¯å¾—åˆ°ä¸€ä¸ªlist zipperçš„å®ç°ã€‚</p><p>ä»æœ€ç®€å•çš„å¼€å§‹ï¼Œä¸€ä¸ªæœ€å°list zipperçš„å®šä¹‰å°±æ˜¯<span>$Loc (Item(0), Top)$</span>ï¼Œä»æœ¬è´¨ä¸Šè®²ï¼Œlist zipper æ˜¯ä¸€ç§çŠ¶æ€æè¿°çš„ç»“æ„ï¼Œè¿™é‡Œç”¨paperä¸­çš„ä¸€ä¸ªä¾‹å­æ¥æè¿°çŠ¶æ€çš„å˜åŒ–è¿‡ç¨‹ã€‚è¡¨è¾¾å¼<span>$((a * b) + (c * d))$</span>ç”¨å‰é¢å®šä¹‰çš„treeç±»å‹æ¥è¡¨ç¤ºå°±æ˜¯</p><pre><code class="nohighlight hljs">let t0 = Section [
	Section [Item(a); Item(*); Item(b)];
	Item(+);
	Section [Item(c); Item(*); Item(d)];]</code></pre><p>æ­¤æ—¶ï¼Œt0æ˜¯æœ€é¡¶å±‚çš„treeï¼Œå®šä¹‰æ­¤æ—¶çš„pathä¸º<span>$Top$</span>ï¼Œä¾¿å¾—åˆ°äº†t0å¯¹åº”çš„locationä¸º<span>$let l0 = Loc (t0, Top)$</span>ã€‚list zipper å®šä¹‰äº†å¦‚ä¸‹éå†è§„åˆ™ï¼š</p><ul><li><span>$go_down$</span>ï¼Œå°±æ˜¯æŒ‡ä»å½“å‰locationå¾€æ›´æ·±ä¸€å±‚èµ°ï¼Œlocationçš„ç¬¬ä¸€ä¸ªå…ƒç´ treeå¦‚æœæ˜¯ä¸€ä¸ªItemçš„è¯ä¼šæŠ¥é”™ï¼ˆæ²¡æœ‰æ›´æ·±çš„ä¸€å±‚äº†ï¼‰ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªlistï¼Œå¯¹å…¶è§£æ„å–å‡ºå…¶å…ƒç´ <span>$[t_first; t_rest]$</span>ï¼Œå…¶ä¸­t<em>firstæ„æˆæ–°locationä¸­çš„treeå…ƒç´ ï¼Œ``let p</em>new = Node ([],p,t<em>rest)<span>$åˆ™æ„æˆæ–°locationä¸­çš„pathå…ƒç´ ã€‚è¿™é‡Œpè¡¨ç¤ºä¸Šä¸€å±‚locationä¸­çš„pathï¼Œå·¦è¾¹çš„ç©ºlist$</span>[]``è¡¨ç¤ºå½“å‰Sectionä¸­t</em>firstå·¦è¾¹çš„treeï¼ˆæ˜¾ç„¶ä¸ºç©ºï¼‰ï¼Œt<em>reståˆ™è¡¨ç¤ºå½“å‰Sectionä¸­t</em>firstå³ä¾§çš„treeã€‚ç›¸å…³çš„OCamlä»£ç è¡¨ç¤ºå¯ä»¥ä»paperä¸­æ‰¾åˆ°ã€‚å¯¹<span>$l0$</span>æ‰§è¡Œ<span>$go_down$</span>æ“ä½œåï¼Œå¯ä»¥å¾—åˆ°<span>$let l1 = Loc (Section [Item(a), Item(*), Item(b)], Node([], Top, [Item(+); Section [Item(c); Item(*); Item(d)]))$</span></li><li><span>$go_up$</span>åˆ™æ˜¯<span>$go_down$</span>çš„é€†æ“ä½œã€‚å¯¹å½“å‰locationä¸­çš„pathå…ƒç´ è§£æ„å¾—åˆ°<span>$(left, p_up, right)$</span>ï¼Œå–å‡ºleftå’Œrightä¸å½“å‰locationä¸­çš„treeå…ƒç´ æ‹¼æ¥å¾—åˆ°æ–°çš„tree_upï¼ˆleftéœ€è¦ç¿»è½¬ï¼‰ã€‚</li><li><span>$go_right$</span>ï¼ŒæŠŠå½“å‰locationä¸­pathè§£æ„åï¼Œå¾—åˆ°<span>$(left, p, r::r_rest)$</span>ï¼Œå–å‡ºå…¶ä¸­çš„rä½œä¸ºæ–°locationçš„treeï¼Œç„¶åå½“å‰locationä¸­çš„treeæ‹¼æ¥åˆ°leftä¸Šï¼Œè¿™æ ·å¾—åˆ°äº†æ–°çš„location <span>$Node(r, (tree::left, p, r_rest))$</span>ã€‚å¯¹å‰é¢çš„<span>$l1$</span>åº”ç”¨<span>$go_right$</span>åå¾—åˆ°<span>$let l2 = Loc (Item(+), Node([Section [Item(a), Item(*), Item(b)], Top, Section [Item(c); Item(*); Item(d)]))$</span></li><li><span>$go_left$</span>ä¹Ÿå°±æ˜¯<code>go_right</code>`çš„é€†æ“ä½œã€‚éœ€è¦æ³¨æ„å¤„ç†è¾¹ç•Œæƒ…å†µã€‚</li></ul><p>å¯è§†åŒ–çš„æè¿°å¯ä»¥çœ‹ä¸‹å›¾ï¼š</p><p><img src="zipper_0.svg" alt="Fig-1: Zipper Illustration"/></p><h1 id="4.-Clojureä¸­çš„zipper"><a class="docs-heading-anchor" href="#4.-Clojureä¸­çš„zipper">4. Clojureä¸­çš„zipper</a><a id="4.-Clojureä¸­çš„zipper-1"></a><a class="docs-heading-anchor-permalink" href="#4.-Clojureä¸­çš„zipper" title="Permalink"></a></h1><p>Clojureä¸­çš„æä¾›äº†ä¸€ä¸ª[clojure.zip][]æ¨¡å—ã€‚ä¸OCamlä¸­çš„å®ç°ç¨å¾®æœ‰äº›ä¸åŒï¼Œç”±äºClojureæ˜¯åŠ¨æ€ç±»å‹çš„ï¼Œå¹¶æ²¡æœ‰ç±»ä¼¼å¾ªç¯å®šä¹‰çš„ç»“æ„ç±»å‹ï¼Œå› æ­¤åœ¨[clojure.zip][]åº“ä¸­é»˜è®¤æä¾›äº†3ç±»zipperï¼ˆseq-zip, vec-zip, xml-zipï¼‰ï¼Œå®é™…ä¸Šå‰é¢è¯´äº†zipperçš„æ€æƒ³å¯ä»¥åœ¨ä»»ä½•é€’å½’çš„ç»“æ„ä¸­åº”ç”¨ï¼Œåé¢ä¼šæåˆ°å¦‚ä½•åœ¨clojureä¸­æ‰©å……æ•°æ®ç»“æ„ç±»å‹ã€‚</p><p>åœ¨Clojureä¸­ï¼Œä¸€ä¸ªzipperçš„åŸºæœ¬å½¢å¼å¦‚ä¸‹ï¼š</p><pre><code class="language-clojure hljs">[node  ;; è¿™é‡Œnodeå¯ä»¥æ˜¯seq, vec æˆ–è€…æ˜¯å…¶å®ƒé€’å½’çš„ç»“æ„
  {:l left_nodes  ;; å½“å‰å±‚çº§ä¸‹å½“å‰nodeå·¦ä¾§çš„nodes
   :r right_nodes  ;; åŒç†ï¼Œå½“å‰å±‚çº§ä¸‹å½“å‰nodeå³ä¾§çš„nodes
   :pnodes nodes_from_root_to_up  ;; ä»root nodeå¼€å§‹ï¼Œä¸€ç›´åˆ°å½“å‰nodeçš„çˆ¶nodeçš„åˆ—è¡¨
   :ppath  ;; é€’å½’å®šä¹‰ï¼Œä¸å‰é¢çš„æ€æƒ³ä¸€è‡´
  }]</code></pre><p>[clojure.zip]: https://clojuredocs.org/clojure.zip</p><h2 id="4.1-Clojureä¸­æä¾›çš„zipperç±»å‹ä¸æ–¹æ³•"><a class="docs-heading-anchor" href="#4.1-Clojureä¸­æä¾›çš„zipperç±»å‹ä¸æ–¹æ³•">4.1 Clojureä¸­æä¾›çš„zipperç±»å‹ä¸æ–¹æ³•</a><a id="4.1-Clojureä¸­æä¾›çš„zipperç±»å‹ä¸æ–¹æ³•-1"></a><a class="docs-heading-anchor-permalink" href="#4.1-Clojureä¸­æä¾›çš„zipperç±»å‹ä¸æ–¹æ³•" title="Permalink"></a></h2><p>[clojure.zip][]ä¸­åŒ…å«äº†ä»¥ä¸‹å‡ ç±»æ“ä½œzipperçš„æ–¹æ³•ï¼š</p><ol><li>éå†ï¼šnext, prev, up, down, left, right, children, lefts, rights, rightmost, leftmost</li><li>æŸ¥è¯¢ï¼šnode, path, </li><li>æ›´æ–°ï¼šedit, replace</li><li>æ’å…¥/åˆ é™¤: insert-child, insert-left, insert-right, remove</li><li>åˆ¤æ–­ï¼š branch?, end?</li></ol><p>æ¯”è¾ƒæœ‰æ„æ€çš„ä¸€ä¸ªå®ç°æ˜¯<span>$end?$</span>ï¼Œç”¨æ¥åˆ¤æ–­<span>$next$</span>çš„ç»“æœæ˜¯å¦åˆ°è¾¾ç»ˆç‚¹ã€‚å¯ä»¥å…ˆçœ‹ä¸ªä¾‹å­ï¼š</p><pre><code class="language-clojure-repl hljs">user=&gt; (zip/vector-zip [])
[[] nil]
user=&gt; (zip/next (zip/vector-zip []))
[[] :end]</code></pre><p>å…¶å®å°±æ˜¯åœ¨<span>$next$</span>çš„æ—¶å€™åŠ å…¥äº†ä¸€äº›åˆ¤æ–­ï¼Œå› ä¸º<span>$next$</span>çš„å®ç°æ˜¯æ·±åº¦ä¼˜å…ˆçš„ï¼Œæœ€åä¼šå›åˆ°rootï¼Œç„¶åæŠŠpathè®¾ä¸º<span>$:end$</span>è¿™æ ·æ¯æ¬¡nextçš„æ—¶å€™ç”¨<span>$end?$</span>åˆ¤æ–­ä¸‹éå†æ˜¯å¦ç»“æŸã€‚å¦å¤–éœ€è¦æ³¨æ„çš„ä¸€ä¸ªæ˜¯<span>$remove$</span>ï¼Œé»˜è®¤ä¼šè¿”å›æ ¹æ®æ·±åº¦ä¼˜å…ˆæ’åºå½“å‰locationçš„å‰ä¸€ä¸ªlocationã€‚</p><h2 id="4.2-å¦‚ä½•æ‰©å±•zippeåˆ°å…¶å®ƒç±»å‹ï¼Ÿ"><a class="docs-heading-anchor" href="#4.2-å¦‚ä½•æ‰©å±•zippeåˆ°å…¶å®ƒç±»å‹ï¼Ÿ">4.2 å¦‚ä½•æ‰©å±•zippeåˆ°å…¶å®ƒç±»å‹ï¼Ÿ</a><a id="4.2-å¦‚ä½•æ‰©å±•zippeåˆ°å…¶å®ƒç±»å‹ï¼Ÿ-1"></a><a class="docs-heading-anchor-permalink" href="#4.2-å¦‚ä½•æ‰©å±•zippeåˆ°å…¶å®ƒç±»å‹ï¼Ÿ" title="Permalink"></a></h2><p>zipperçš„æ€æƒ³å¯ä»¥æ‰©å±•åˆ°å¾ˆå¤šå…¶ä»–ç±»å‹çš„æ•°æ®ç»“æ„ã€‚åœ¨[clojure.zip][]ä¸­æä¾›äº†[zipper][]å‡½æ•°æ¥æ„å»ºæ–°çš„zipperç±»å‹ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨å„ç§éå†æ›´æ–°çš„å‡½æ•°äº†ã€‚å…¶ä¸­ï¼Œéœ€è¦æä¾›ä¸€ä¸‹å‡ ä¸ªå‡½æ•°ï¼š</p><ol><li><span>$branch?$</span>ï¼Œåˆ¤æ–­ä¸€ä¸ªnodeæ˜¯ä¸æ˜¯è¿˜èƒ½æœ‰childrenï¼ˆå¯ä»¥ä¸ºç©ºï¼‰</li><li><span>$children$</span>ï¼Œç»™å®šä¸€ä¸ªå¯ä»¥branchç±»å‹çš„nodeï¼Œè¿”å›seqç±»å‹çš„children</li><li><span>$make-node$</span>ï¼Œç»™å®šä¸€ä¸ªnodeå’Œchildrenï¼Œè¿”å›æ–°çš„node</li><li><span>$root$</span>ï¼Œå³root node</li></ol><p>åœ¨[hickory][]ä¸­æœ‰ä¸€ä¸ª<span>$hiccup-zip$</span>çš„å®ç°ï¼Œå¯ä»¥å­¦ä¹ ä¸‹å¦‚ä½•è¿›è¡Œæ‰©å±•çš„ã€‚</p><p>[zipper]:https://github.com/clojure/clojure/blob/59b65669860a1f33825775494809e5d500c19c63/src/clj/clojure/zip.clj#L18 [hickory]:https://github.com/davidsantiago/hickory/blob/master/src/hickory/zip.cljx</p><h2 id="4.3-æ›´é«˜æ•ˆçš„è®¿é—®æ–¹æ³•"><a class="docs-heading-anchor" href="#4.3-æ›´é«˜æ•ˆçš„è®¿é—®æ–¹æ³•">4.3 æ›´é«˜æ•ˆçš„è®¿é—®æ–¹æ³•</a><a id="4.3-æ›´é«˜æ•ˆçš„è®¿é—®æ–¹æ³•-1"></a><a class="docs-heading-anchor-permalink" href="#4.3-æ›´é«˜æ•ˆçš„è®¿é—®æ–¹æ³•" title="Permalink"></a></h2><p>å°½ç®¡[clojure.zip][]åº“ä¸­æä¾›äº†å¾ˆä¸°å¯Œçš„éå†å’Œæ›´æ–°å‡½æ•°ï¼Œä½†æ˜¯ï¼Œæƒ³è¦ä¼˜é›…åœ°ä¿®æ”¹é€’å½’ç±»å‹çš„ç»“æ„ä»ç„¶æ˜¯ä»¶å¾ˆç¹ççš„äº‹ï¼Œå¾ˆå¤šæ—¶å€™éƒ½éœ€è¦åŠ¨æ‰‹å†™<span>$loop ... recur ...$</span>ï¼Œé€šå¸¸è®¤ä¸ºè¿™æ ·çš„æ“ä½œæ˜¯æ¯”è¾ƒåº•å±‚çš„ã€‚</p><p>[specter][]å°±æ˜¯ç”¨æ¥æä¾›é«˜æ•ˆè®¿é—®çš„ï¼Œå…¶ä¸­å¯¹zipperç±»å‹çš„æ•°æ®ä¹Ÿæä¾›äº†å¾ˆå¥½çš„æ¥å£ï¼Œèƒ½å¤Ÿå†™å‡ºæ›´ç®€æ´é«˜æ•ˆçš„ä»£ç ã€‚</p><p>[specter]:https://github.com/nathanmarz/specter [FUNCTIONAL PEARL The Zipper]:https://www.st.cs.uni-saarland.de/edu/seminare/2005/advanced-fp/docs/huet-zipper.pdf</p><h1 id="5-å‚è€ƒ"><a class="docs-heading-anchor" href="#5-å‚è€ƒ">5 å‚è€ƒ</a><a id="5-å‚è€ƒ-1"></a><a class="docs-heading-anchor-permalink" href="#5-å‚è€ƒ" title="Permalink"></a></h1><ul><li><a href="http://www.ibm.com/developerworks/library/j-treevisit/">Tree visitors in Clojure</a></li></ul></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>. All contents published at this site follows <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a> by default. For the Chinese version, please visit <a href="https://tianjun.me">tianjun.me</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Saturday 23 December 2023 15:51">Saturday 23 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
