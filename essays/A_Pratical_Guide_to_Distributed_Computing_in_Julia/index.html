<!DOCTYPE html>
<html lang="en-US"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ä¸€æ–‡è¯»æ‡‚Juliaä¸­çš„å¹¶è¡Œè®¡ç®— Â· Jun Tian</title><meta name="title" content="ä¸€æ–‡è¯»æ‡‚Juliaä¸­çš„å¹¶è¡Œè®¡ç®— Â· Jun Tian"/><meta property="og:title" content="ä¸€æ–‡è¯»æ‡‚Juliaä¸­çš„å¹¶è¡Œè®¡ç®— Â· Jun Tian"/><meta property="twitter:title" content="ä¸€æ–‡è¯»æ‡‚Juliaä¸­çš„å¹¶è¡Œè®¡ç®— Â· Jun Tian"/><meta name="description" content="Documentation for Jun Tian."/><meta property="og:description" content="Documentation for Jun Tian."/><meta property="twitter:description" content="Documentation for Jun Tian."/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-132847825-3"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-132847825-3', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.jpg" alt="Jun Tian logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Jun Tian</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">ğŸ‘‹ About</a></li><li><span class="tocitem">ğŸ’» Programming</span><ul><li><a class="tocitem" href="../../programming/A_Deep_Dive_into_Distributed.jl/">A Deep Dive into Distributed.jl</a></li></ul></li><li><span class="tocitem">ğŸ“– Reading</span><ul><li><a class="tocitem" href="../../reading/Notes_on_Distributional_Reinforcement_Learning/">Notes on Distributional Reinforcement Learning</a></li></ul></li><li><a class="tocitem" href="../../AMA/">ğŸ™‹ Ask Me Anything</a></li><li><a class="tocitem" href="../../blogroll/">ğŸ”— Blogroll</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>ä¸€æ–‡è¯»æ‡‚Juliaä¸­çš„å¹¶è¡Œè®¡ç®—</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>ä¸€æ–‡è¯»æ‡‚Juliaä¸­çš„å¹¶è¡Œè®¡ç®—</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/findmyway/TianJun.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ï‚›</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/findmyway/TianJun.jl/blob/master/docs/src/essays/A_Pratical_Guide_to_Distributed_Computing_in_Julia/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ï„</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><hr/><p>keywords: Julia,ParallelComputing CJKmainfont: KaiTi â€“-</p><h1 id="ä¸€æ–‡è¯»æ‡‚Juliaä¸­çš„å¹¶è¡Œè®¡ç®—"><a class="docs-heading-anchor" href="#ä¸€æ–‡è¯»æ‡‚Juliaä¸­çš„å¹¶è¡Œè®¡ç®—">ä¸€æ–‡è¯»æ‡‚Juliaä¸­çš„å¹¶è¡Œè®¡ç®—</a><a id="ä¸€æ–‡è¯»æ‡‚Juliaä¸­çš„å¹¶è¡Œè®¡ç®—-1"></a><a class="docs-heading-anchor-permalink" href="#ä¸€æ–‡è¯»æ‡‚Juliaä¸­çš„å¹¶è¡Œè®¡ç®—" title="Permalink"></a></h1><p>æœ€è¿‘é˜…è¯»äº†Juliaä¸­çš„<a href="https://github.com/JuliaLang/julia/tree/master/stdlib/Distributed">Distributed</a>æ ‡å‡†åº“ï¼Œå¯¹Juliaä¸­çš„å¹¶è¡Œè®¡ç®—åˆå¤šäº†ä¸€äº›æ€è€ƒã€‚å°½ç®¡å®˜æ–¹æ–‡æ¡£ä¸­æœ‰ä¸€ç« è¯¦ç»†ä»‹ç»å¹¶è¡Œè®¡ç®—(<a href="https://docs.juliacn.com/latest/manual/parallel-computing/">ä¸­æ–‡</a>, <a href="https://docs.julialang.org/en/v1/manual/parallel-computing/">è‹±æ–‡</a>)ï¼Œæˆ‘åˆšæ¥è§¦Juliaçš„æ—¶å€™ä¹Ÿå†™äº†ä¸€ç¯‡<a href="https://tianjun.me/essays/An_Introduction_to_Parallel_Computing_in_Julia_From_Bottom_Up">è‡ªåº•å‘ä¸Šç†è§£Juliaä¸­çš„å¹¶è¡Œè®¡ç®—</a>ï¼Œä¸è¿‡æ€»æ„Ÿè§‰è®²å¾—ä¸å¤Ÿé€å½»ã€‚æœ¬æ–‡çš„ç›®çš„æ˜¯ç”¨ä¸€äº›å®é™…çš„ä¾‹å­å¸®åŠ©å¤§å®¶æ·±å…¥ç†è§£Juliaä¸­çš„å¹¶è¡Œè®¡ç®—ã€‚</p><p>æœ¬æ–‡å°†åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>Task</li><li>Channel</li><li>RemoteChannel</li><li>ClusterManager</li></ul><p>æœ¬æ–‡<strong>ä¸åŒ…æ‹¬</strong>ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>XXé—®é¢˜åº”è¯¥é€‰æ‹©å“ªç§å¹¶è¡Œè®¡ç®—æ–¹å¼ï¼Ÿ</li></ul><h2 id="Task"><a class="docs-heading-anchor" href="#Task">Task</a><a id="Task-1"></a><a class="docs-heading-anchor-permalink" href="#Task" title="Permalink"></a></h2><p>é€šå¸¸æˆ‘ä»¬å¹¶æ²¡æœ‰æ„ŸçŸ¥åˆ°ç©¶ç«Ÿä»€ä¹ˆæ˜¯Taskï¼Œå…¶å®æ¯æ¬¡æˆ‘ä»¬ä»å‘½ä»¤è¡Œé‡Œè¾“å…¥<code>julia</code>ï¼Œæ‰“å¼€REPLç•Œé¢ä¹‹åï¼Œå°±è¿›å…¥äº†ä¸€ä¸ªtaskä¸­ï¼Œé€šè¿‡<a href="https://docs.julialang.org/en/v1/base/parallel/#Base.current_task"><code>current_task</code></a>å‡½æ•°å°±å¯ä»¥è·å–åˆ°å½“å‰è¿è¡Œä¸­çš„taskå¯¹è±¡ï¼š</p><pre><code class="language-julia hljs">julia&gt; t = current_task()
Task (runnable) @0x00007f34ded89600</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>t</code>çš„æ‰“å°è¾“å‡ºä¸­ï¼Œæ‹¬å·é‡Œæä¾›äº†ä¸€ä¸ª<strong>runnable</strong>ä¿¡æ¯ï¼Œè¡¨æ˜å½“å‰task <code>t</code> æ˜¯å¯æ‰§è¡Œçš„ï¼Œé™¤äº†<code>runnable</code>ä¹‹å¤–ï¼Œtaskè¿˜æœ‰å…¶å®ƒå‡ ä¸ª<a href="https://docs.julialang.org/en/v1.2-dev/manual/control-flow/#Task-states-1">çŠ¶æ€</a>:</p><table><tr><th style="text-align: left">Symbol</th><th style="text-align: left">Meaning</th></tr><tr><td style="text-align: left"><code>:runnable</code></td><td style="text-align: left">Currently running, or able to run</td></tr><tr><td style="text-align: left"><code>:done</code></td><td style="text-align: left">Successfully finished executing</td></tr><tr><td style="text-align: left"><code>:failed</code></td><td style="text-align: left">Finished with an uncaught exception</td></tr></table><p>åé¢ä¼šä»‹ç»å„ä¸ªçŠ¶æ€çš„å…·ä½“å«ä¹‰ï¼Œè¿™é‡Œå…ˆç•™ä¸‹ä¸ªå°è±¡å³å¯ã€‚è¿™äº›çŠ¶æ€å­˜åœ¨<code>t.state</code>å­—æ®µä¸­ï¼š</p><pre><code class="language-julia hljs">julia&gt; t.state
:runnable</code></pre><p>é‚£ä»€ä¹ˆæ˜¯Taskå‘¢ï¼Ÿä¸€ä¸ªtaskå°±æ˜¯ä¸€æ®µæ‰§è¡Œé€»è¾‘ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡<code>Task</code>æ¥æ„é€ ï¼š</p><pre><code class="language-julia hljs">julia&gt; t_hi = Task(() -&gt; println(&quot;Hi&quot;))
Task (runnable) @0x00007f34dec870d0

julia&gt; t_hi.state
:runnable</code></pre><p>è¿™é‡Œ<code>Task</code>å¯ä»¥æ¥æ”¶ä¸€ä¸ªlambdaå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„taskã€‚æ­¤å¤–è¿˜æœ‰ä¸€ä¸ª<code>@task</code>å®ï¼Œç”¨æ¥æ–¹ä¾¿åœ°å°†ä¸€æ®µæ‰§è¡Œé€»è¾‘æ„é€ æˆä¸€ä¸ªtaskï¼š</p><pre><code class="language-julia hljs">julia&gt; t_hello_world = @task begin
              println(&quot;I&#39;m in a task!&quot;)
              &quot;Hello World!&quot;
              end
Task (runnable) @0x00007f34dc84b0d0</code></pre><p>é‚£ä¹ˆå¦‚ä½•æ‰§è¡Œä¸€ä¸ªtaskå‘¢ï¼Ÿè°ƒç”¨<code>schedule</code>å³å¯ï¼š</p><pre><code class="language-julia hljs">julia&gt; schedule(t_hello_world)
I&#39;m in a task!
Task (runnable) @0x00007fb18f7eae10

julia&gt; t_hello_world.state
:done

julia&gt; t_hello_world.result
&quot;Hello World!&quot;</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„taské¡ºåˆ©æ‰§è¡Œå®Œä¹‹åï¼ŒçŠ¶æ€å°±å˜æˆäº†<code>:done</code>ï¼Œå¯¹åº”çš„æ‰§è¡Œç»“æœä¿å­˜åœ¨<code>t_hello_world.result</code>å­—æ®µä¸­ã€‚æ­¤å¤–è¿˜æœ‰å‡ ä¸ªå‡½æ•°ç”¨äºæ£€æŸ¥çŠ¶æ€ï¼š</p><ul><li><code>istaskstarted</code></li><li><code>istaskdone</code></li><li><code>istaskfailed</code></li></ul><p>taskä¸­ä¹Ÿå¯ä»¥æŠ¥é”™ï¼Œé”™è¯¯ä¼šä¿å­˜åœ¨task çš„<code>exception</code>å­—æ®µä¸­ï¼š</p><pre><code class="language-julia hljs">julia&gt; schedule(t_error)
Task (failed) @0x0000000012aef0f0
Oh no...
error(::String) at .\error.jl:33
(::getfield(Main, Symbol(&quot;##7#8&quot;)))() at .\task.jl:87

julia&gt; t_error.state
:failed

julia&gt; t_error.result
ErrorException(&quot;Oh no...&quot;)

julia&gt; t_error.exception
ErrorException(&quot;Oh no...&quot;)</code></pre><p>é‚£ä¹ˆï¼Œ<code>schedule</code>ç©¶ç«Ÿåšäº†ä»€ä¹ˆå‘¢ï¼Ÿè¿™é‡Œå°±æ¶‰åŠ<code>task</code>çš„åº•å±‚å®ç°äº†ã€‚ç®€å•æ¥è®²ï¼ŒJulia ä¼šç»™æ¯ä¸ª thread éƒ½ç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œ<code>schedule</code>æ‰€åšçš„å°±æ˜¯å°†è¯¥taskæŒ‰ç…§ä¸€å®šè§„åˆ™ï¼ˆåé¢ä¼šå†è¯¦ç»†è§£é‡Šï¼‰åŠ å…¥åˆ°æŸä¸ªé˜Ÿåˆ—ä¸­ã€‚ç”±äºæˆ‘ä»¬å¯åŠ¨ Julia çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰æŒ‡å®š<code>JULIA_NUM_THREADS</code>ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥é»˜è®¤åªæœ‰ä¸€ä¸ªé˜Ÿåˆ—ï¼š</p><pre><code class="language-julia hljs">julia&gt; Base.Workqueues
1-element Array{Base.InvasiveLinkedListSynchronized{Task},1}:
 Base.InvasiveLinkedListSynchronized{Task}(Base.InvasiveLinkedList{Task}(nothing, nothing), Base.Threads.SpinLock(Base.Threads.Atomic{Int64}(0)))</code></pre><p>å°†taskåŠ å…¥é˜Ÿåˆ—ä¸­ä¹‹åï¼Œè°ƒåº¦å™¨ä¼šåœ¨ç©ºé—²æ—¶ï¼Œè´Ÿè´£ä»é˜Ÿåˆ—ä¸­é¡ºåºå–taskå¹¶æ‰§è¡Œã€‚</p><p>&lt;div class=&quot;alert alert-warning&quot;&gt; éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œå‰é¢çš„ä¾‹å­ä¸­ï¼Œä¼¼ä¹æ‰§è¡Œå®Œ<code>schedule(t_error)</code>ä¹‹åï¼Œ<code>t_error</code>å°±ç«‹å³æ‰§è¡Œå¾—åˆ°äº†ç»“æœã€‚å…¶å®ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨REPLä¸­åˆ†æ­¥æ‰§è¡Œçš„ï¼Œæ‰§è¡Œå®Œ<code>schedule(t_error)</code>ä¹‹åï¼ŒREPLå°±è¿›å…¥äº†ç­‰å¾…çš„è¿‡ç¨‹ï¼Œæ­¤æ—¶è°ƒåº¦å™¨ç©ºé—²äº†ï¼Œå°±ä¼šæŒ‰ç…§æ—¢å®šçš„è§„åˆ™ä»é˜Ÿåˆ—ä¸­å–taskå¹¶æ‰§è¡Œã€‚å¯ä»¥ç”¨ä¸‹é¢çš„ä¾‹å­æ¥éªŒè¯ä¸‹ã€‚ &lt;/div&gt;</p><pre><code class="language-julia hljs">julia&gt; t = @task @info &quot;I&#39;m in task&quot;
Task (runnable) @0x0000000012a802f0

julia&gt; begin
       schedule(t)
       @info &quot;Hello&quot;
       end
[ Info: Hello
[ Info: I&#39;m in task</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>Hello</code>å…ˆæ‰“å°äº†å‡ºæ¥ï¼Œç„¶å task <code>t</code> æ¥ç€å°±æ‰§è¡Œå¹¶æ‰“å° <code>I&#39;m in task</code>ã€‚</p><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬äº†è§£äº†ä»€ä¹ˆæ˜¯task (WHAT), å¦‚ä½•ä½¿ç”¨task (HOW)ï¼Œé‚£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨taskå‘¢ï¼Ÿ (WHY)</p><p>è¿™å°±æ¶‰åŠåˆ°æˆ‘ä»¬è¿˜æ²¡æåˆ°çš„ä¸€ä¸ªtaskçš„ç‰¹æ€§ï¼Œåœ¨ä¸€æ®µtaskçš„æ‰§è¡Œé€»è¾‘ä¹‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ï¼ˆæ˜¾å¼åœ°/éšå¼åœ°ï¼‰æŒ‡å®šæŸäº›åœ°æ–¹èƒ½è¢«ä¸­æ–­å’Œæ¢å¤ã€‚ç›´æ¥æ‰§è¡Œ<code>yield()</code>å°±ç›¸å½“äºæ˜¾å¼åœ°å‘Šè¯‰è°ƒåº¦å™¨ï¼Œâ€œæŠŠæˆ‘æ”¾åˆ°é˜Ÿåˆ—é‡Œå–ï¼Œè®©é˜Ÿåˆ—é‡Œå…¶å®ƒtaskæœ‰æœºä¼šè¢«æ‰§è¡Œâ€ï¼Œå½“ç„¶ï¼Œå¦‚æœå…¨å±€çš„taské˜Ÿåˆ—ä¸­æ²¡æœ‰<code>runnable</code>çš„taskï¼Œé‚£ä¹ˆå°±ä¼šç«‹å³ç»§ç»­æ‰§è¡Œæ¥ä¸‹æ¥çš„å…¶å®ƒä»£ç ã€‚ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼š</p><pre><code class="language-julia hljs">julia&gt; t1 = @task begin
       @info &quot;begin task1&quot;
       yield()
       @info &quot;end task1&quot;
       end
Task (runnable) @0x00007f7542e7e850

julia&gt; t2 = @task begin
       @info &quot;begin task2&quot;
       yield()
       @info &quot;end task2&quot;
       end
Task (runnable) @0x00007f7542e7eb30

julia&gt; begin
       schedule(t1)
       schedule(t2)
       yield()
       @info &quot;Current task running&quot;
       end
[ Info: begin task1
[ Info: begin task2
[ Info: Current task running
[ Info: end task1
[ Info: end task2</code></pre><p>è¿™é‡Œå…ˆå®šä¹‰äº†ä¸¤ä¸ªtaskï¼Œæ¯ä¸ªtaskéƒ½æ˜¯å…ˆæ‰“å°beginä¿¡æ¯ï¼Œç„¶åæ˜¯æ‰§è¡Œ<code>yield()</code>å…è®¸è‡ªå·±è¢«ä¸­æ–­ï¼Œä¸€æ—¦è¢«æ¢å¤åï¼Œå†æ‰“å°endä¿¡æ¯ã€‚æ³¨æ„æœ€åä¸€ä¸ªä»£ç å—ï¼Œé¦–å…ˆè°ƒåº¦<code>t1</code>,ç„¶åè°ƒåº¦<code>t2</code>,æ­¤æ—¶<code>t1</code>å’Œ<code>t2</code>éƒ½è¢«åŠ åˆ°äº†ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œæœ€åæ‰§è¡Œ<code>yield()</code>æŠŠè‡ªå·±ä¹ŸåŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œè®©è°ƒåº¦å™¨å¼€å§‹è°ƒåº¦ã€‚ä»è¾“å‡ºçš„é¡ºåºå¯ä»¥çœ‹å‡ºï¼Œ<code>t1</code>å…ˆè¢«æ‰§è¡Œï¼Œæ‰§è¡Œåˆ°<code>yield()</code>è¯­å¥åï¼Œè®©å‡ºæ§åˆ¶æƒï¼Œè°ƒåº¦å™¨ä»é˜Ÿåˆ—ä¸­é€‰å‡º<code>t2</code>æ‰§è¡Œï¼ŒåŒæ ·æ‰§è¡Œåˆ°<code>yield()</code>ä¹‹åè®©å‡ºæ§åˆ¶æƒï¼Œç„¶åå½“å‰taskè¢«é€‰ä¸­æ‰§è¡Œï¼Œæ­¤å<code>t1</code>å†æ¬¡è¢«é€‰ä¸­ï¼Œæ‰§è¡Œç»“æŸï¼Œç„¶åå†æ‰§è¡Œ<code>t2</code>ï¼Œç›´è‡³ç»“æŸã€‚</p><p>æ­¤å¤–ï¼Œ<code>yield</code>è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªtaskä½œä¸ºå‚æ•°ï¼Œæ‰§è¡Œåä¼šå°†è¯¥taskæ”¾åœ¨é˜Ÿåˆ—çš„æœ€å‰é¢è¢«è°ƒåº¦ï¼Œæ¯”å¦‚ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¯•ç€å°†<code>t2</code>ä¸­çš„<code>yield()</code>æ”¹æˆ<code>yield(t1)</code>ï¼Œç„¶å<code>schedule(t2)</code>è¯•è¯•ï¼Ÿ</p><p>é‚£å…è®¸ä¸€æ®µä»£ç è¢«ä¸­æ–­çš„å¥½å¤„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><strong>å¹¶å‘</strong></p><p>ä¸€ä¸ªç»å…¸çš„ä¾‹å­æ˜¯ï¼Œåœ¨åšç½‘ç»œè¯·æ±‚çš„æ—¶å€™ï¼Œä¼šç­‰å¾…å“åº”ï¼Œè‹¥æ²¡æœ‰ä¸­æ–­çš„æœºåˆ¶ï¼Œé‚£ä¹ˆä¼šä¸€ç›´é˜»å¡ï¼Œè¿™æ ·å¯¼è‡´å®è´µçš„è®¡ç®—èµ„æºåœ¨æ­¤æœŸé—´ç™½ç™½æµªè´¹æ‰äº†ã€‚æœ‰äº†ä¸­æ–­æœºåˆ¶ä¹‹åï¼Œåœ¨ç­‰å¾…å“åº”çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä¸»åŠ¨åˆ‡å‡ºå»ï¼Œè®©è°ƒåº¦å™¨æœ‰æœºä¼šè¿è¡Œå…¶å®ƒtaskï¼Œç­‰è·å–åˆ°å“åº”ä¹‹åï¼Œå†å°†è‡ªå·±æ”¾å›åˆ°taské˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…è¢«è°ƒåº¦å¹¶æ‰§è¡Œã€‚</p><p>TODO: Need a picture here</p><p>ä¸ºäº†å®ç°ä¸Šè¿°é€»è¾‘ï¼ŒJuliaä¸­æä¾›äº†ä¸€ä¸ª<code>Condition</code>å¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ç±»æŠ½è±¡çš„<strong>æ¡ä»¶</strong>ã€‚taskå¯ä»¥æ‰§è¡Œ<code>wait(c::Condition)</code>ï¼Œå°†è‡ªå·±æŒ‚è½½åœ¨è¯¥Conditionä¸‹çš„é“¾è¡¨æœ«å°¾ï¼Œå¹¶<code>yield()</code>å‡ºå»ï¼Œè‹¥Conditionæ»¡è¶³ï¼Œåˆ™å¯ä»¥è°ƒç”¨<code>notify(c::Condition)</code>ï¼Œå°†æŒ‚è½½åœ¨è¯¥Conditionçš„taské“¾è¡¨ä¸Šçš„taské€†åºæ·»åŠ åˆ°è°ƒåº¦å™¨çš„æ‰§è¡Œé˜Ÿåˆ—ä¸­ï¼Œä»è€Œè®©å…¶å®ƒtaskæœ‰æœºä¼šè¢«æ‰§è¡Œã€‚</p><pre><code class="language-julia hljs">julia&gt; c = Condition()
Condition(#undef, 0, 0)

julia&gt; t1 = @task begin
       @info &quot;task1 working...&quot;
       wait(c)
       @info &quot;condition satisfied&quot;
       end
Task (runnable) @0x00007f75412e45d0

julia&gt; schedule(t1)
[ Info: task1 working...
Task (runnable) @0x00007f75412e45d0

julia&gt; t1.state
:runnable

julia&gt; notify(c)
[ Info: condition satisfied</code></pre><p>Juliaä¸­<a href="https://github.com/JuliaLang/julia/blob/v1.1.0/base/stream.jl#L44">stream</a>å’Œ<a href="https://github.com/JuliaLang/julia/blob/v1.1.0/base/event.jl#L341">Timer</a>ç›¸å…³çš„æ“ä½œéƒ½é‡‡ç”¨ç±»ä¼¼æœºåˆ¶å®ç°çš„ã€‚</p><p>ç†è§£ä¸Šé¢çš„è¿™äº›æ¦‚å¿µä¹‹åï¼Œå°±å¯ä»¥åšå¾ˆå¤šæœ‰æ„ä¹‰çš„äº‹æƒ…äº†ã€‚</p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>. All contents published at this site follows <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a> by default. For the Chinese version, please visit <a href="https://tianjun.me">tianjun.me</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Saturday 23 December 2023 15:51">Saturday 23 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
